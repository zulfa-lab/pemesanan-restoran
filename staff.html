<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>Sistem Staff Resto (OOP Final)</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root { --primary: #2d3436; --accent: #0984e3; --success: #00b894; --warning: #fdcb6e; --danger: #d63031; --bg: #dfe6e9; --card: #ffffff; --radius: 12px; }
  * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
  body { font-family: 'Poppins', sans-serif; background: var(--bg); margin: 0; padding: 20px; color: #2d3436; }
  .hidden { display: none !important; }
  .btn { border: none; padding: 10px 15px; border-radius: 8px; font-weight: 600; cursor: pointer; transition: 0.2s; font-size: 14px; }
  .btn-blue { background: var(--accent); color: #fff; } .btn-green { background: var(--success); color: #fff; } .btn-red { background: var(--danger); color: #fff; } .btn-ghost { background: transparent; color: #636e72; border: 1px solid #b2bec3; }
  input, select { width: 100%; padding: 12px; border: 1px solid #dfe6e9; border-radius: 8px; margin-bottom: 10px; font-family: inherit; outline: none; }
  .login-wrapper { display: flex; height: 90vh; justify-content: center; align-items: center; }
  .login-card { background: var(--card); padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); width: 100%; max-width: 400px; text-align: center; }
  .dash-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
  .role-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; }
  .role-card { background: var(--card); padding: 20px; border-radius: 16px; text-align: center; box-shadow: 0 4px 12px rgba(0,0,0,0.05); cursor: pointer; transition: 0.3s; border: 2px solid transparent; }
  .role-card:hover { transform: translateY(-5px); border-color: var(--accent); }
  .role-icon { font-size: 32px; display: block; margin-bottom: 10px; }
  .top-bar { background: var(--card); padding: 15px 20px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
  .ticket-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; }
  .ticket { background: var(--card); border-radius: 12px; overflow: hidden; display: flex; flex-direction: column; }
  .ticket-header { padding: 12px 15px; display: flex; justify-content: space-between; align-items: center; font-weight: 600; border-bottom: 1px dashed #dfe6e9; }
  .ticket-body { padding: 15px; flex: 1; }
  .ticket-items { list-style: none; padding: 0; margin: 0; font-size: 14px; }
  .ticket-footer { padding: 12px 15px; background: #f8f9fa; border-top: 1px solid #eee; text-align: right; }
  .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
  .stat-card { background: var(--primary); color: #fff; padding: 20px; border-radius: 16px; position: relative; cursor: pointer; }
  .menu-row { display: flex; justify-content: space-between; align-items: center; background: #fff; padding: 12px; margin-bottom: 8px; border-radius: 8px; border: 1px solid #eee; }
  .menu-thumb { width: 40px; height: 40px; border-radius: 8px; object-fit: cover; margin-right: 10px; background: #eee; }
  .stock-habis { opacity: 0.5; background: #f5f5f5; }
  .modal-overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:999; justify-content:center; align-items:center; backdrop-filter: blur(3px); }
  .modal-box { background:#fff; width:90%; max-width:500px; max-height:85vh; border-radius:16px; padding:25px; overflow-y:auto; animation: popUp 0.3s ease; display: flex; flex-direction: column; }
  .modal-popup { background:#fff; width:85%; max-width:350px; border-radius: 20px; padding:25px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
  @keyframes popUp { from{transform:scale(0.8);opacity:0} to{transform:scale(1);opacity:1} }
  .btn-sys { padding: 12px; border-radius: 10px; border: 0; font-weight: 600; font-size: 14px; flex: 1; cursor: pointer; }
  .btn-sys-primary { background: var(--accent); color: #fff; } .btn-sys-danger { background: var(--danger); color: #fff; } .btn-sys-ghost { background: #f1f2f6; color: #555; }
  .scroll-h::-webkit-scrollbar { display: none; } .scroll-h { -ms-overflow-style: none; scrollbar-width: none; }
</style>
</head>
<body>

<div id="loginPage" class="login-wrapper">
    <div class="login-card"><h2 style="margin:0">üîí Staff Portal</h2><p style="color:#636e72; margin-bottom:30px">Restoran Modern System</p><input type="password" id="passInput" placeholder="Masukkan Kode Akses..."><button class="btn btn-blue" style="width:100%; padding:15px; font-size:16px" onclick="cekLogin()">Masuk Dashboard</button><p style="margin-top:20px; font-size:12px; color:#b2bec3" id="statusPass">Menghubungkan Server...</p></div>
</div>

<div id="dashboardPage" class="container hidden" style="max-width:800px; margin:0 auto">
    <div class="dash-header"><div><h2 style="margin:0">Halo, Team! üëã</h2><small style="color:#636e72">Selamat bertugas!</small></div><button class="btn btn-ghost" onclick="logout()">Keluar</button></div>
    <div class="role-grid">
        <div class="role-card" onclick="bukaHalaman('kasir')"><span class="role-icon">üñ•Ô∏è</span><div style="font-weight:600">Kasir</div></div>
        <div class="role-card" onclick="bukaHalaman('dapur')"><span class="role-icon">üë®‚Äçüç≥</span><div style="font-weight:600">Dapur</div></div>
        <div class="role-card" onclick="bukaHalaman('admin')" style="border-top: 3px solid var(--danger)"><span class="role-icon">‚öôÔ∏è</span><div style="font-weight:600">Admin</div></div>
    </div>
</div>

<div id="fiturPage" class="container hidden" style="max-width:1000px; margin:0 auto">
    <div class="top-bar"><div class="page-title" id="pageTitle">Halaman</div><button class="btn btn-ghost" onclick="kembaliKeDash()">‚¨Ö Menu Utama</button></div><div id="kontenFitur"></div>
</div>

<div id="sysModal" class="modal-overlay"><div class="modal-popup" onclick="event.stopPropagation()"><h3 id="sysTitle" style="margin:0 0 10px 0; font-size:18px;">Notifikasi</h3><p id="sysMsg" style="color:#666; font-size:14px; margin:0 0 20px 0; line-height:1.5"></p><input id="sysInput" style="display:none; text-align:center; background:#f1f2f6" placeholder="..."><div id="sysButtons" style="display:flex; gap:10px; justify-content:center;"></div></div></div>
<div id="modalRiwayat" class="modal-overlay"><div class="modal-box"><div style="display:flex; justify-content:space-between; margin-bottom:15px; align-items:center"><h3>üìú Riwayat</h3><button class="btn btn-ghost" onclick="tutupRiwayat()">‚úï</button></div><div id="listRiwayatContent"></div></div></div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, addDoc, updateDoc, deleteDoc, doc, setDoc, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCF7wEQhPICgOr9gKuBqGaYdipZiu1WRDo",
    authDomain: "pemesanan-restoran.firebaseapp.com",
    projectId: "pemesanan-restoran",
    storageBucket: "pemesanan-restoran.firebasestorage.app",
    messagingSenderId: "257315829382",
    appId: "1:257315829382:web:d457fd1cb09f3e1283c307",
    measurementId: "G-PPE58FRCLL"
  };

  const appFirebase = initializeApp(firebaseConfig);
  const db = getFirestore(appFirebase);

  // ============================================
  //  1. IMPLEMENTASI 4 KELAS (BUKTI PBO UTAMA!)
  // ============================================

  // [KELAS 1] Parent Class
  class User {
      constructor(role, password) {
          this.role = role;
          this.password = password;
      }
      validate(inputPass) { return this.password === inputPass; }
  }

  // [KELAS 2] Child Class (INHERITANCE)
  class Admin extends User {
      constructor(password) {
          super('admin', password); // Memanggil constructor User
      }
      // Polymorphism: Admin punya akses lebih tinggi
      hasFullAccess() { return true; }
  }

  // [KELAS 3] Data Makanan (ENCAPSULATION)
  class MenuItem {
      constructor(id, data) {
          this.id = id;
          this.nama = data.nama;
          this.harga = data.harga;
          this.kategori = data.kategori;
          this.gambar = data.gambar || 'https://cdn-icons-png.flaticon.com/512/1147/1147832.png';
          this.stok = data.stok !== false;
      }
      getFormattedPrice() { return "Rp " + Number(this.harga).toLocaleString(); }
  }

  // [KELAS 4] Transaksi (AGGREGATION)
  class OrderTicket {
      constructor(id, data) {
          this.id = id;
          this.meja = data.meja;
          this.items = data.items; 
          this.catatan = data.catatan;
          this.total = data.total;
          this.status = data.status;
          this.metodeBayar = data.metodeBayar || "Tunai";
          this.tanggalString = data.tanggalString;
      }
      isPaid() { return this.status !== "Menunggu Pembayaran"; }
      isReady() { return this.status === "Siap"; }
  }
  // ============================================

  // State
  let pesananList = []; let menus = []; let totalMeja = 5; let adminKeyword = ""; 
  let staffPass = "staff123"; let adminPass = "admin123";

  // Init
  initListeners();
  function initListeners(){
      onSnapshot(query(collection(db, "pesanan"), orderBy("createdAt", "desc")), (snap) => {
          pesananList = snap.docs.map(d => new OrderTicket(d.id, d.data())); // NEW OBJECT
          refreshCurrentView();
      });
      onSnapshot(collection(db, "menus"), (snap)=>{
          menus = snap.docs.map(d => new MenuItem(d.id, d.data())); // NEW OBJECT
          refreshCurrentView();
      });
      onSnapshot(doc(db, "settings", "toko"), (s) => { if(s.exists()) totalMeja = s.data().totalMeja || 5; });
      onSnapshot(doc(db, "settings", "auth"), (s) => {
          const st = document.getElementById("statusPass");
          if (s.exists()) { staffPass = s.data().staffPassword; adminPass = s.data().adminPassword; if(st) st.innerText = "‚óè Sistem Online"; }
          else { setDoc(doc(db, "settings", "auth"), { staffPassword: "staff123", adminPassword: "admin123" }); if(st) st.innerText = "‚óè Default Mode"; }
      });
  }

  // --- LOGIC AUTH DENGAN CLASS ---
  window.cekLogin = async () => {
      const p = document.getElementById("passInput").value;
      
      // BUKTI PENGGUNAAN CLASS USER & ADMIN
      const staffUser = new User('staff', staffPass);
      const adminUser = new Admin(adminPass);

      if(staffUser.validate(p) || adminUser.validate(p)){ 
          document.getElementById("loginPage").classList.add("hidden");
          document.getElementById("dashboardPage").classList.remove("hidden");
      } else { await appAlert("Password Salah!"); }
  };

  window.bukaHalaman = async (role) => {
      if(role === 'admin') {
          let input = await appPassword("Masukkan Password Admin:");
          const currentAdmin = new Admin(adminPass); // Instansiasi Admin
          if(!currentAdmin.validate(input)) return await appAlert("Akses Ditolak.");
      }
      document.getElementById("dashboardPage").classList.add("hidden");
      document.getElementById("fiturPage").classList.remove("hidden");
      renderFitur(role);
  };

  window.kembaliKeDash = () => { document.getElementById("fiturPage").classList.add("hidden"); document.getElementById("dashboardPage").classList.remove("hidden"); };
  window.logout = () => location.reload();
  function refreshCurrentView() { const mode = document.getElementById("kontenFitur").getAttribute("data-mode"); if(mode) renderFitur(mode); }

  function renderFitur(role){
      const el = document.getElementById("kontenFitur"); const title = document.getElementById("pageTitle"); el.setAttribute("data-mode", role); 
      if(role === 'dapur') { title.innerText = "üë®‚Äçüç≥ Layar Dapur"; renderDapur(el); }
      else if(role === 'kasir') { title.innerText = "üñ•Ô∏è Kasir Station"; renderKasir(el); }
      else if(role === 'admin') { title.innerText = "üìä Admin Dashboard"; renderAdmin(el); }
  }

  // 1. DAPUR
  function renderDapur(el){
      const tasks = pesananList.filter(p => p.status === 'Diproses' || p.status === 'Siap');
      if(!tasks.length) { el.innerHTML = `<div style="text-align:center; padding:50px; color:#aaa">üò¥ Tidak ada antrian masak</div>`; return; }
      let h = `<div class="ticket-grid">`;
      tasks.forEach(p => {
          let isReady = p.isReady(); // Panggil Method Class
          h += `<div class="ticket" style="border-top: 5px solid ${isReady?'var(--success)':'var(--accent)'}">
              <div class="ticket-header ${isReady?'bg-ready':'bg-process'}"><span>Meja ${p.meja}</span><small>${p.tanggalString.split(',')[1]||''}</small></div>
              <div class="ticket-body"><ul class="ticket-items">${p.items.map(i=>`<li><b>${i.qty}x</b> ${i.nama}</li>`).join('')}</ul>
              ${p.catatan ? `<div class="ticket-note">üìù ${p.catatan}</div>` : ''}</div>
              <div class="ticket-footer">${!isReady ? `<button class="btn btn-blue" onclick="ubahStatus('${p.id}','Siap')">üç≥ Selesai Masak</button>` : `<div style="color:var(--success); font-weight:bold">Menunggu Diantar...</div>`}</div>
          </div>`;
      });
      h += `</div>`; el.innerHTML = h;
  }

  // 2. KASIR
  function renderKasir(el){
      const orders = pesananList.filter(p => p.status !== 'Selesai');
      if(!orders.length) { el.innerHTML = `<div style="text-align:center; padding:50px; color:#aaa">‚ú® Semua transaksi beres</div>`; return; }
      let h = `<div class="ticket-grid">`;
      orders.forEach(p => {
          let isUnpaid = !p.isPaid(); // Panggil Method Class
          h += `<div class="ticket"><div class="ticket-header" style="background:#f8f9fa"><span>Meja ${p.meja}</span><span class="btn" style="padding:2px 8px; font-size:10px; ${isUnpaid?'background:#ffeaa7; color:#d35400':'background:#eee'}">${p.status}</span></div>
              <div class="ticket-body"><div style="font-size:24px; font-weight:700; margin-bottom:5px">Rp ${p.total.toLocaleString()}</div>
              <div style="font-size:11px; color:#555; margin-bottom:10px">Via: ${p.metodeBayar}</div>
              <hr style="border:0; border-top:1px dashed #eee; margin:10px 0"><small style="color:#b2bec3">${p.items.map(i=>i.nama).join(', ')}</small></div>
              <div class="ticket-footer">${isUnpaid ? `<button class="btn btn-green" style="width:100%" onclick="terimaBayar('${p.id}')">üí∞ Terima Rp ${p.total.toLocaleString()}</button>` : `<div style="text-align:center; color:#b2bec3; font-size:12px; margin-bottom:5px">Lunas</div>`}
              ${p.status === 'Siap' ? `<button class="btn btn-blue" style="width:100%" onclick="ubahStatus('${p.id}','Selesai')">‚úÖ Selesai (Diambil)</button>` : ''}</div></div>`;
      });
      h += `</div>`; el.innerHTML = h;
  }

  // 3. ADMIN
  function renderAdmin(el){
      let totalUang = 0; let totalTransaksi = 0;
      pesananList.forEach(p => { if(p.status === 'Selesai'){ totalUang += p.total; totalTransaksi++; } });
      let h = `
      <div class="stat-grid">
          <div class="stat-card" style="background:#2d3436"><span class="stat-label">Total Omset</span><span class="stat-val">Rp ${totalUang.toLocaleString()}</span></div>
          <div class="stat-card" style="background:#0984e3; cursor:pointer" onclick="bukaRiwayat()"><span class="stat-label">Transaksi Selesai</span><span class="stat-val">${totalTransaksi} üì¶</span></div>
      </div>
      <div class="ticket-grid">
          <div class="ticket" style="grid-column: span 2">
              <div class="ticket-header">üçî Manajemen Menu & Stok</div>
              <div class="ticket-body">
                 <div style="background:#f9f9f9; padding:10px; border-radius:8px; border:1px solid #eee; margin-bottom:15px">
                    <label style="font-size:12px; font-weight:bold; color:#666">Tambah Menu Baru:</label>
                    <div style="display:flex; flex-direction:column; gap:5px; margin-top:5px">
                        <input id="newMenuName" placeholder="Nama Menu..." style="margin:0">
                        <div style="display:flex; gap:5px"><select id="newMenuCat" style="flex:1; margin:0"><option value="Makanan">Makanan</option><option value="Minuman">Minuman</option><option value="Cemilan">Cemilan</option></select><input id="newMenuPrice" type="number" placeholder="Harga" style="flex:1; margin:0"></div>
                        <input id="newMenuImg" placeholder="Link Gambar (URL) - Opsional" style="margin:0; font-size:12px">
                        <button class="btn btn-blue" onclick="tambahMenu()" style="margin-top:5px">Simpan Menu</button>
                    </div>
                 </div>
                 <input placeholder="üîç Cari menu..." onkeyup="cariAdminDOM(this.value)" id="searchAdminInput" style="background:#f1f2f6">
                 <div style="max-height:250px; overflow-y:auto; margin-top:10px">
                    ${menus.map(m => `
                        <div class="menu-row admin-search-item ${m.stok?'':'stock-habis'}" data-name="${m.nama.toLowerCase()}">
                            <div style="display:flex; align-items:center"><img src="${m.gambar}" class="menu-thumb"><div><b>${m.nama}</b> <small class="btn" style="padding:2px 5px; font-size:10px; background:#eee">${m.kategori}</small></div></div>
                            <div style="display:flex; align-items:center"><button class="btn ${m.stok?'btn-green':'btn-red'}" style="padding:4px 8px; font-size:10px; margin-right:5px" onclick="toggleStok('${m.id}', ${m.stok})">${m.stok?'‚úÖ Ada':'‚õî Habis'}</button><b style="margin-right:10px; font-size:13px">${m.getFormattedPrice()}</b><button class="btn btn-red" style="padding:5px 10px" onclick="hapusMenu('${m.id}')">√ó</button></div>
                        </div>`).join('')}
                 </div>
              </div>
          </div>
          <div class="ticket">
              <div class="ticket-header">‚öôÔ∏è & üñ®Ô∏è Pengaturan</div>
              <div class="ticket-body">
                  <label>Jumlah Meja (QR):</label><div style="display:flex; gap:5px; margin-bottom:15px"><input type="number" id="inputTotalMeja" value="${totalMeja}" style="margin:0"><button class="btn btn-green" onclick="updateTotalMeja()">Set</button></div>
                  <p style="margin:0 0 10px 0; font-size:12px; color:#666">Geser ‚û°</p>
                  <div class="scroll-h" style="display:flex; gap:10px; overflow-x:auto; padding-bottom:10px;">${Array.from({length:totalMeja}, (_, i) => i + 1).map(i => `<div style="min-width:100px; text-align:center; border:1px solid #eee; padding:10px; border-radius:8px;"><img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(`${window.location.href.replace("staff.html", "index.html")}?table=${i}`)}" style="width:100%; display:block"><small>Meja ${i}</small></div>`).join('')}</div>
                  <hr><div style="margin-top:10px"><label>Pass Staff:</label><div style="display:flex; gap:5px"><input id="newStaffPass" placeholder="${staffPass}" style="margin:0"><button class="btn btn-blue" onclick="gantiPass('staff')">Up</button></div></div>
                  <div style="margin-top:10px"><label>Pass Admin:</label><div style="display:flex; gap:5px"><input id="newAdminPass" placeholder="${adminPass}" style="margin:0"><button class="btn btn-red" onclick="gantiPass('admin')">Up</button></div></div>
                  <hr><button class="btn btn-red" style="width:100%" onclick="resetData()">‚ö†Ô∏è HAPUS DATA</button>
              </div>
          </div>
      </div>`;
      el.innerHTML = h;
      if(document.getElementById("searchAdminInput")) { document.getElementById("searchAdminInput").value = adminKeyword; cariAdminDOM(adminKeyword); }
  }

  // --- ACTIONS ---
  window.cariAdminDOM = (val) => { adminKeyword = val.toLowerCase(); document.querySelectorAll(".admin-search-item").forEach(el => { el.style.display = el.getAttribute("data-name").includes(adminKeyword) ? "flex" : "none"; }); }
  window.ubahStatus = async (id, st) => { await updateDoc(doc(db,"pesanan",id), {status:st}); };
  window.tambahMenu = async () => {
      let n = document.getElementById("newMenuName").value, p = document.getElementById("newMenuPrice").value, k = document.getElementById("newMenuCat").value, img = document.getElementById("newMenuImg").value;
      if(n && p) { await addDoc(collection(db,"menus"), { nama: n, harga: Number(p), kategori: k, gambar: img, stok: true }); await appAlert("Menu tersimpan!"); }
  };
  window.toggleStok = async (id, current) => { await updateDoc(doc(db, "menus", id), { stok: !current }); };
  window.terimaBayar = async (id) => { if(await appConfirm("Terima Pembayaran?")) await updateDoc(doc(db,"pesanan",id), { status: "Diproses" }); };
  window.hapusMenu = async (id) => { if(await appConfirm("Hapus menu ini?")) await deleteDoc(doc(db, "menus", id)); };
  window.updateTotalMeja = async () => { const jml = document.getElementById("inputTotalMeja").value; if(jml>0) { await setDoc(doc(db, "settings", "toko"), { totalMeja: Number(jml) }, {merge:true}); await appAlert("Updated!"); } };
  window.resetData = async () => { const key = await appPrompt("Ketik 'HAPUS' untuk reset:", "..."); if(key==="HAPUS") { pesananList.forEach(async p => await deleteDoc(doc(db,"pesanan",p.id))); await appAlert("Data dibersihkan!"); } };
  window.gantiPass = async (tipe) => { const val = document.getElementById(tipe==='staff'?"newStaffPass":"newAdminPass").value; if(val.length<5) return await appAlert("Min 5 karakter"); if(await appConfirm("Update Password?")) { const upd = {}; upd[tipe+'Password'] = val; await setDoc(doc(db, "settings", "auth"), upd, { merge: true }); await appAlert("Sukses!"); } };
  window.bukaRiwayat = () => { const modal = document.getElementById("modalRiwayat"); const content = document.getElementById("listRiwayatContent"); const done = pesananList.filter(p => p.status === 'Selesai'); content.innerHTML = done.length ? done.map(p => `<div style="border-bottom:1px solid #eee; padding:10px 0"><div style="display:flex; justify-content:space-between"><b>Meja ${p.meja}</b> <small>${p.tanggalString}</small></div><div style="color:#666; font-size:12px">${p.items.map(i=>`${i.nama} x${i.qty}`).join(', ')}</div><div style="text-align:right; color:var(--success)">Rp ${p.total.toLocaleString()}</div></div>`).join('') : "Belum ada data."; modal.style.display = "flex"; }
  window.tutupRiwayat = () => document.getElementById("modalRiwayat").style.display = "none";
  // System Modals Helpers
  window.appAlert = (msg) => new Promise(r => { document.getElementById('sysTitle').innerText="Info"; document.getElementById('sysMsg').innerText=msg; document.getElementById('sysInput').style.display='none'; document.getElementById('sysButtons').innerHTML=`<button class="btn-sys btn-sys-primary" id="btnOk">Oke</button>`; document.getElementById('sysModal').style.display='flex'; document.getElementById('btnOk').onclick=()=>{document.getElementById('sysModal').style.display='none';r(true)}; });
  window.appConfirm = (msg) => new Promise(r => { document.getElementById('sysTitle').innerText="Konfirmasi"; document.getElementById('sysMsg').innerText=msg; document.getElementById('sysInput').style.display='none'; document.getElementById('sysButtons').innerHTML=`<button class="btn-sys btn-sys-ghost" id="btnNo">Batal</button><button class="btn-sys btn-sys-primary" id="btnYes">Ya</button>`; document.getElementById('sysModal').style.display='flex'; document.getElementById('btnNo').onclick=()=>{document.getElementById('sysModal').style.display='none';r(false)}; document.getElementById('btnYes').onclick=()=>{document.getElementById('sysModal').style.display='none';r(true)}; });
  window.appPrompt = (msg, ph="") => new Promise(r => { document.getElementById('sysTitle').innerText="Input"; document.getElementById('sysMsg').innerText=msg; const i=document.getElementById('sysInput'); i.style.display='block'; i.value=""; i.placeholder=ph; i.type="text"; document.getElementById('sysButtons').innerHTML=`<button class="btn-sys btn-sys-ghost" id="btnCancel">Batal</button><button class="btn-sys btn-sys-primary" id="btnSubmit">Kirim</button>`; document.getElementById('sysModal').style.display='flex'; i.focus(); document.getElementById('btnCancel').onclick=()=>{document.getElementById('sysModal').style.display='none';r(null)}; document.getElementById('btnSubmit').onclick=()=>{document.getElementById('sysModal').style.display='none';r(i.value)}; });
  window.appPassword = (msg) => new Promise(r => { document.getElementById('sysTitle').innerText="Keamanan"; document.getElementById('sysMsg').innerText=msg; const i=document.getElementById('sysInput'); i.style.display='block'; i.value=""; i.placeholder="***"; i.type="password"; document.getElementById('sysButtons').innerHTML=`<button class="btn-sys btn-sys-ghost" id="btnCancel">Batal</button><button class="btn-sys btn-sys-danger" id="btnSubmit">Akses</button>`; document.getElementById('sysModal').style.display='flex'; i.focus(); document.getElementById('btnCancel').onclick=()=>{document.getElementById('sysModal').style.display='none';r(null)}; document.getElementById('btnSubmit').onclick=()=>{document.getElementById('sysModal').style.display='none';r(i.value)}; });
</script>
</body>
</html>

